<div class="container-fluid px-0">
  <div class="row mx-0">
    <div class="col-lg-6 p-xl-5">
      <% if params[:query_location].present? %>
      <h1 class="search-results ml-0"><h2><strong>Dates in <%= params[:query_location] %> </strong></h2>
        <% else %>
        <% end %>
        <hr class="my-4">
        <div class="row">
          <div class="col-xl-12 col-md-12">
            <div class="form-wrapper" style="margin: 0 auto;">
              <%= simple_form_for :search, method: "get" do |f| %>
              <div class="row">
                <div class="col-6">

                  <%= f.input :date, as: :string, required: false, input_html: {class: "datepicker"} %>
                </div>
                <div class="col-6">

                  <%= f.input :price, as: :integer, input_html: { value: params[:price] } %>
                </div>
              </div>
              <%= hidden_field_tag :query_location,
              params[:query_location]
              %>
              <%= hidden_field_tag :query_title_description,
              params[:query_title_description]
              %>
              <%= f.input :category_id, collection: @categories, as: :check_boxes, input_html: { class: "tag-selector" },
                  item_wrapper_class: 'tag-item' %>

              <div class="submit-new-review-btn">
                <button class="date-btn-2 mt-3" type="submit">
                  <i class="fas fa-search mr-1"></i>
                  Search
                </button>
              </div>
              <% end %>
            </div>
          </div>

        </div>
        <hr class="my-3">
        <div class="d-flex justify-content-between align-items-center flex-column flex-md-row mb-4">
          <div class="mr-3">
            <p class="mb-2 mb-md-0">
              <strong><%= @dates.count %></strong>
              results found
            </p>
          </div>
          <div>
            <label class="form-label mr-2" for="form_sort">Sort by</label>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-12 hover-animate">
            <% @dates.each do |date| %>
            <div class="index-card shadow">
              <div class="date-photo">
                <%= cl_image_tag date.photos.first.key, height: 200, width: 200, crop: :fill, class: "photo-centered" %>
              </div>
              <div class="date-info">
                <div class="date-categories">
                  <% date.categories.take(3).each do |c| %>
                  <div class="date-category"><%= c.name %></div>
                  <% end %>
                </div>
                <div class="date-title"><%= date.title %></div>
                <div class="date-location"><i class="fas fa-map-marker date-detail-marker"></i> <%= date.location %></div>
                <div class="date-reviews"><%= date.reviews.count %> Reviews</div>
                <%= link_to 'Details', dates_show_path(date), class: "date-btn" %>
              </div>
            </div>
            <% end %>
          </div>
        </div>
      </div>


      <div class="col-lg-6 map-side-lg pr-lg-0">
        <div id="map" class="map-index shadow-left"
        style="width: 100%; height: 100vh;"
        data-markers="<%= @markers.to_json %>"
        data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
      </div>
    </div>
  </div>

