<%= link_to 'Home', root_path %>

<div class="filter-container">
  <h2>Filters</h2>
  <div class="filter">
    <div class="price-search">
      <p>Budget:</p>
      <%= form_tag dates_index_path, method: :get do %>
      <%= hidden_field_tag :query_location,
      params[:query_location]
      %>
      <%= hidden_field_tag :query_title_description,
      params[:query_title_description]
      %>

      <%= number_field_tag :query_price,
      params[:query_price],
      class: "form-control"
        %>
      </div>


      <div class="category-search">
       <p>Categories:</p>
       <% @categories.each do |category| %>
       <%= label_tag "not working", category.name %>
       <%= check_box_tag "category_ids[]", category.id %>
       <% end %>
     </div>
     <div>
      <%= submit_tag "Search", class: "btn btn-primary" %>
     </div>
      <% end %>


  </div>
</div>


<% if params[:query_location].present? %>
<h1>Dates in <%= params[:query_location] %></h1>
<% else %>
<h1>Dates Search Results</h1>
<% end %>


<div class="row">
  <div class="col-12 col-lg-6">
    <div class="container">
      <ul class="list-group">
        <% @dates.each do |date| %>
        <li class="list-group-item">
          <%= date.title %>
          <%= date.location %>
          <%= date.description %>
          <%= link_to 'details', dates_show_path(date) %>
        </li>
        <% end %>
      </ul>
    </div>
  </div>


  <div id="map" class="col-12 col-lg-6 map-wrapper"
  style="width: 100%; height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
</div>
